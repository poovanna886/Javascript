<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Football Draft Duel</title>
<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
<style>
    body {
        background: linear-gradient(45deg, #1a2a6c, #b21f1f, #fdbb2d);
        font-family: 'Arial', sans-serif;
        color: white;
        height: 100vh;
        margin: 0;
        display: flex;
        flex-direction: column;
    }
    .game-container {
        display: flex;
        justify-content: space-around;
        flex-grow: 1;
    }
    .player-zone {
        width: 45%;
        padding: 20px;
        text-align: center;
    }
    .card {
        width: 100px;
        height: 150px;
        background-color: #fff;
        color: #000;
        border-radius: 10px;
        display: inline-block;
        margin: 10px;
        transition: transform 0.6s;
        transform-style: preserve-3d;
        cursor: pointer;
        position: relative;
    }
    .card.flip {
        transform: rotateY(180deg);
    }
    .card-back, .card-front {
        position: absolute;
        backface-visibility: hidden;
    }
    .card-front {
        transform: rotateY(180deg);
    }
    .btn-draft, .btn-steal {
        margin-top: 20px;
        transition: opacity 0.3s;
    }
    .modal-content {
        background-color: rgba(255, 255, 255, 0.9);
    }
</style>
</head>
<body>

<div class="game-container">
    <div class="player-zone" id="player1">
        <h2>Player 1</h2>
        <button class="btn btn-primary btn-draft" onclick="draftCard(1)">Draft Card</button>
        <div id="player1Team"></div>
        <button class="btn btn-warning btn-steal" style="display:none;" onclick="stealCard(1, 2)">Steal Card</button>
    </div>
    <div class="player-zone" id="player2">
        <h2>Player 2</h2>
        <button class="btn btn-primary btn-draft" onclick="draftCard(2)" disabled>Draft Card</button>
        <div id="player2Team"></div>
        <button class="btn btn-warning btn-steal" style="display:none;" onclick="stealCard(2, 1)">Steal Card</button>
    </div>
</div>

<div class="modal fade" id="winnerModal" tabindex="-1" role="dialog">
  <div class="modal-dialog" role="document">
    <div class="modal-content">
      <div class="modal-body text-center">
        <h4>Congratulations!</h4>
        <p id="winnerText"></p>
      </div>
    </div>
  </div>
</div>

<script>
    const players = [
        {name: "Messi", OVR: 93, image: "messi.jpg"},
        //... more player data
    ];

    let currentPlayer = 1;
    let player1Deck = [], player2Deck = [];
    let gamePhase = 'draft';

    function shuffle(array) {
        for (let i = array.length - 1; i > 0; i--) {
            const j = Math.floor(Math.random() * (i + 1));
            [array[i], array[j]] = [array[j], array[i]];
        }
    }

    function draftCard(player) {
        if (currentPlayer !== player || gamePhase !== 'draft') return;
        
        const availablePlayers = players.filter(p => !player1Deck.includes(p) && !player2Deck.includes(p));
        if (availablePlayers.length < 3) return; // Game over or error
        
        shuffle(availablePlayers);
        const draftCards = availablePlayers.slice(0, 3);
        
        // Display cards face down
        draftCards.forEach(card => {
            const cardElement = document.createElement('div');
            cardElement.className = 'card';
            cardElement.innerHTML = `<div class="card-back">?</div><div class="card-front" style="display:none;"><img src="${card.image}" width="100" height="100"><br>${card.name}<br>OVR: ${card.OVR}</div>`;
            cardElement.onclick = () => selectCard(card, player);
            document.getElementById(`player${player}Team`).appendChild(cardElement);
        });
        
        document.querySelector(`#player${player} .btn-draft`).disabled = true;
    }

    function selectCard(card, player) {
        const team = player === 1 ? player1Deck : player2Deck;
        team.push(card);
        const cardElements = document.getElementById(`player${player}Team`).children;
        for(let el of cardElements) {
            if(el.querySelector('.card-front').innerHTML.includes(card.name)) {
                el.classList.add('flip');
                el.onclick = null;
                setTimeout(() => el.querySelector('.card-front').style.display = 'block', 300);
                setTimeout(() => el.querySelector('.card-back').style.display = 'none', 300);
            }
        }
        
        if (player === 1) currentPlayer = 2;
        else currentPlayer = 1;
        
        if (currentPlayer === 1 || currentPlayer === 2) {
            document.querySelector(`#player${currentPlayer} .btn-draft`).disabled = false;
        }
        
        if (players.every(p => player1Deck.includes(p) || player2Deck.includes(p))) {
            gamePhase = 'steal';
            document.querySelectorAll('.btn-steal').forEach(btn => btn.style.display = '');
        }
    }

    function stealCard(fromPlayer, toPlayer) {
        // Logic for stealing card
        // Ensure no card can be stolen back directly
        // Update UI to reflect this change
        // Check for game end
    }

    function checkWin() {
        const ovr1 = player1Deck.reduce((sum, p) => sum + p.OVR, 0);
        const ovr2 = player2Deck.reduce((sum, p) => sum + p.OVR, 0);
        let winner = ovr1 > ovr2 ? 'Player 1' : 'Player 2';
        document.getElementById('winnerText').innerText = `${winner} wins with an OVR of ${Math.max(ovr1, ovr2)}!`;
        $('#winnerModal').modal('show');
    }

    shuffle(players); // Initial shuffle
</script>
<script src="https://code.jquery.com/jquery-3.5.1.slim.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/@popperjs/core@2.9.3/dist/umd/popper.min.js"></script>
<script src="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/js/bootstrap.min.js"></script>
</body>
</html>