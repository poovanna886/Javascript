<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Storm Prediction Map</title>
    <link
      href="https://unpkg.com/leaflet@1.7.1/dist/leaflet.css"
      rel="stylesheet"
    />
    <link
      href="https://cdn.jsdelivr.net/npm/tailwindcss@2.2.19/dist/tailwind.min.css"
      rel="stylesheet"
    />
    <script src="https://unpkg.com/leaflet@1.7.1/dist/leaflet.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/leaflet.heat/0.2.0/leaflet-heat.js"></script>
  </head>
  <body class="bg-gray-100">
    <div id="map" class="h-screen w-full"></div>
    <div class="absolute bottom-10 left-1/2 transform -translate-x-1/2 z-50">
      <input
        type="range"
        min="0"
        max="6"
        value="0"
        class="slider w-64"
        id="daySlider"
      />
      <p class="text-center mt-2" id="dayDisplay">Day: 1</p>
    </div>

    <script>
      // Initialize the map
      var map = L.map('map').setView([37.8, -96], 4);

      L.tileLayer('https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png', {
        maxZoom: 19,
      }).addTo(map);

      // Dummy data generation
      function generateDummyData(day) {
        let data = [];
        for (let i = 0; i < 1000; i++) {
          data.push([
            Math.random() * 180 - 90,
            Math.random() * 360 - 180,
            Math.random() * (day + 1),
          ]); // Lat, Lng, Intensity
        }
        return data;
      }

      var heat;
      function updateHeatMap(day) {
        if (heat) {
          map.removeLayer(heat);
        }
        heat = L.heatLayer(generateDummyData(day), {
          radius: 25,
          blur: 15,
          maxZoom: 10,
          gradient: { 0.4: 'blue', 0.65: 'lime', 1: 'red' },
        }).addTo(map);
      }

      // Initial heatmap
      updateHeatMap(0);

      // Slider functionality
      var slider = document.getElementById('daySlider');
      var dayDisplay = document.getElementById('dayDisplay');

      slider.oninput = function () {
        let day = this.value;
        dayDisplay.textContent = 'Day: ' + (parseInt(day) + 1);
        updateHeatMap(day);
      };
    </script>
  </body>
</html>
