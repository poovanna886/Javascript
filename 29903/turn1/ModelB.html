<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Santa's Present Drop</title>
<style>
    body { 
        background: #001f3f; 
        margin: 0; 
        overflow: hidden; 
        font-family: 'Arial', sans-serif; 
    }
    #canvas {
        display: block;
        background: url('https://i.imgur.com/6Qk1eNf.png'); /* Background image with a night sky or similar */
        background-size: cover;
    }
    #score, #highScore {
        position: absolute;
        color: white;
        font-size: 24px;
    }
    #score { top: 10px; left: 10px; }
    #highScore { top: 10px; right: 10px; }
    #startScreen {
        position: absolute;
        width: 100%;
        height: 100%;
        background: rgba(0, 0, 0, 0.7);
        display: flex;
        justify-content: center;
        align-items: center;
        color: white;
        font-size: 30px;
        cursor: pointer;
    }
</style>
</head>
<body>
<div id="startScreen">Tap to Play</div>
<canvas id="canvas"></canvas>
<script>
    const canvas = document.getElementById('canvas');
    const ctx = canvas.getContext('2d');
    canvas.width = window.innerWidth;
    canvas.height = window.innerHeight;
    const startScreen = document.getElementById('startScreen');
    
    // Game variables
    let score = 0;
    let highScore = localStorage.getItem('highScore') || 0;
    let santa, present, chimneys = [];
    const chimneyWidth = 60;
    const presentSpeed = 5;
    let gameLoop;

    // Santa's sleigh image
    const sleighImage = new Image();
    sleighImage.src = 'https://i.imgur.com/1JtH4nL.png'; // Path to Santa's sleigh image

    function startGame() {
        startScreen.style.display = 'none';
        santa = {x: 0, y: 100, speed: 2};
        gameLoop = setInterval(updateGame, 1000/60);
    }

    function updateGame() {
        ctx.clearRect(0, 0, canvas.width, canvas.height);
        santa.x += santa.speed;
        if (santa.x > canvas.width) santa.x = -sleighImage.width; // Reset Santa's position

        // Draw Santa
        ctx.drawImage(sleighImage, santa.x, santa.y);

        // Chimneys
        if (Math.random() < 0.02) { // Random chance to spawn a chimney
            chimneys.push({x: canvas.width, y: canvas.height - Math.random() * 200 - 50, height: Math.random() * 200 + 50});
        }
        chimneys = chimneys.filter(ch => ch.x > -chimneyWidth);
        chimneys.forEach(ch => {
            ch.x -= santa.speed;
            ctx.fillStyle = "#8B4513";
            ctx.fillRect(ch.x, ch.y, chimneyWidth, ch.height);
        });

        // Drop present
        if (present) {
            present.y += presentSpeed;
            ctx.fillStyle = "red";
            ctx.fillRect(present.x, present.y, 10, 20);
            // Check if present hits a chimney
            chimneys.forEach((ch, index) => {
                if (present.x > ch.x && present.x < ch.x + chimneyWidth && present.y + 20 > ch.y && present.y < ch.y + ch.height) {
                    score++;
                    chimneys.splice(index, 1);
                    present = null;
                    // Display message
                    ctx.fillStyle = "green";
                    ctx.font = "20px Arial";
                    ctx.fillText("Hit!", santa.x + 50, santa.y - 10);
                }
            });
            if (present.y > canvas.height) {
                present = null;
                // Display miss message
                ctx.fillStyle = "red";
                ctx.fillText("Miss!", santa.x + 50, santa.y - 10);
            }
        }

        // Update scores
        document.getElementById('score').innerText = `Score: ${score}`;
        document.getElementById('highScore').innerText = `High Score: ${Math.max(highScore, score)}`;
    }

    canvas.addEventListener('click', function(e) {
        if (!present) {
            present = {x: santa.x + sleighImage.width / 2, y: santa.y + 20};
        }
    });

    startScreen.addEventListener('click', startGame);

    // Update high score in localStorage
    window.addEventListener('beforeunload', function() {
        if (score > highScore) {
            localStorage.setItem('highScore', score);
        }
    });
</script>
</body>
</html>