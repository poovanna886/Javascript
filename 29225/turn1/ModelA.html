<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Tilt Maze Game</title>
<style>
    body { 
        display: flex; 
        justify-content: center; 
        align-items: center; 
        height: 100vh; 
        margin: 0; 
        background: #f0f0f0; 
    }
    #gameArea {
        position: relative;
        width: 400px;
        height: 400px;
        border: 2px solid #000;
        overflow: hidden;
    }
    #maze, #ball, #goal {
        position: absolute;
    }
    #ball {
        width: 20px;
        height: 20px;
        background: red;
        border-radius: 50%;
    }
    #goal {
        width: 50px;
        height: 50px;
        background: green;
        left: 175px;
        top: 175px;
        border-radius: 5px;
    }
    #message {
        text-align: center;
        font-family: Arial, sans-serif;
    }
</style>
</head>
<body>
<div id="gameArea">
    <div id="maze"></div>
    <div id="ball"></div>
    <div id="goal"></div>
</div>
<h2 id="message"></h2>

<script>
    const gameArea = document.getElementById('gameArea');
    const mazeElement = document.getElementById('maze');
    const ball = document.getElementById('ball');
    const goal = document.getElementById('goal');
    const message = document.getElementById('message');

    // Game state
    let tiltX = 0, tiltY = 0;
    let ballX = 10, ballY = 10; // Starting position
    const ballRadius = 10;
    const gravity = 0.2;
    const friction = 0.98;

    // Simple maze structure (you might want to generate this dynamically)
    const maze = [
        '##########',
        '#     #  #',
        '# #####  #',
        '#        #',
        '#  ##### #',
        '#  #     #',
        '#  ######',
        '#        #',
        '##########'
    ];

    function drawMaze() {
        maze.forEach((row, y) => {
            [...row].forEach((cell, x) => {
                if (cell === '#') {
                    let wall = document.createElement('div');
                    wall.style.position = 'absolute';
                    wall.style.left = `${x * 40}px`;
                    wall.style.top = `${y * 40}px`;
                    wall.style.width = '40px';
                    wall.style.height = '40px';
                    wall.style.background = 'black';
                    mazeElement.appendChild(wall);
                }
            });
        });
    }

    function update() {
        // Tilt effect
        let forceX = tiltX * gravity;
        let forceY = tiltY * gravity;

        // Simple movement (no real physics)
        ballX += forceX;
        ballY += forceY;

        // Collision detection with walls would go here
        // Basic bounds checking
        if (ballX < ballRadius) ballX = ballRadius;
        if (ballX > gameArea.offsetWidth - ballRadius) ballX = gameArea.offsetWidth - ballRadius;
        if (ballY < ballRadius) ballY = ballRadius;
        if (ballY > gameArea.offsetHeight - ballRadius) ballY = gameArea.offsetHeight - ballRadius;

        // Check if ball reached the goal
        if (Math.abs(ballX - 195) < 25 && Math.abs(ballY - 195) < 25) {
            message.textContent = 'You Win!';
            return; // Stop the game
        }

        // Update ball position
        ball.style.left = `${ballX - ballRadius}px`;
        ball.style.top = `${ballY - ballRadius}px`;

        requestAnimationFrame(update);
    }

    function handleTilt(e) {
        tiltX = e.gamma / 90; // For mobile devices
        tiltY = e.beta / 90;
    }

    // Event listeners
    if (window.DeviceOrientationEvent) {
        window.addEventListener("deviceorientation", handleTilt, true);
    } else {
        // Fallback to mouse movement for tilt effect
        gameArea.addEventListener('mousemove', function(e) {
            let rect = gameArea.getBoundingClientRect();
            tiltX = (e.clientX - rect.left - rect.width/2) / (rect.width/2);
            tiltY = (e.clientY - rect.top - rect.height/2) / (rect.height/2);
        });
    }

    // Initialize game
    drawMaze();
    update();
</script>
</body>
</html>